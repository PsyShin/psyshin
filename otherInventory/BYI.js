//norm

BYI_Norm =
[[["ClassGrp1","7y-10y"],[[[25,28,29,30,30,31,32,32,33,33,34,35,35,36,36,37,38,39,39,40,41,41,42,42,43,44,44,45,45,46,47,47,48,49,50,51,51,52,52,53,54,54,55,55,56,57,58,59,60,61,62,63,64,64,65,66,66,67,68,69,72],[31,35,36,38,40,41,42,43,44,45,46,48,49,49,50,51,52,53,53,54,55,56,56,57,58,59,59,60,60,61,62,62,62,63,63,64,65,65,66,67,67,67,67,67,67,67,67,67,68,69,70,71,72,72,73,75,75,75,75,75,78],[32,37,39,41,42,44,46,47,49,50,51,52,53,54,55,56,57,58,59,59,60,60,61,61,62,62,63,63,64,64,65,65,66,66,67,67,67,68,68,68,68,69,70,71,71,71,71,71,72,72,72,72,73,73,73,74,75,76,76,76,78],[32,36,38,40,42,43,45,46,47,48,49,50,51,52,53,53,55,56,56,57,57,58,58,59,59,60,61,62,62,63,63,64,64,65,66,66,67,67,68,68,68,69,69,69,70,71,72,74,74,74,74,74,74,74,75,77,78,80,81,81,81],[35,40,43,46,48,49,51,53,54,56,57,58,59,60,61,62,63,64,64,65,66,66,67,67,67,68,68,69,69,69,69,70,71,72,73,73,74,74,74,75,75,75,75,75,75,75,75,75,75,75,75,75,75,77,78,78,78,78,78,78,80]],[[23,27,29,31,32,32,33,33,34,34,34,34,35,36,37,37,38,38,38,39,40,41,41,42,43,43,44,45,46,46,47,47,48,48,49,50,50,51,52,53,53,54,55,56,56,57,57,58,59,59,60,61,61,63,64,64,65,68,70,71,74],[29,33,36,37,38,40,41,42,43,44,45,46,47,48,49,50,51,51,52,53,54,55,55,56,56,57,58,59,59,60,61,61,62,63,63,63,64,65,65,66,66,67,68,69,70,71,71,72,72,72,72,73,74,76,77,78,78,78,78,78,80],[30,36,39,41,42,43,45,47,48,49,50,51,52,53,54,55,56,56,57,58,58,59,60,60,60,61,62,62,62,63,63,64,65,65,66,66,66,66,67,67,68,69,70,70,70,70,70,71,71,72,72,72,73,73,74,74,76,78,80,81,81],[32,38,40,41,43,44,45,46,47,48,50,50,51,52,53,54,55,56,57,58,58,59,60,60,61,62,62,63,63,64,64,65,65,66,66,67,67,68,68,68,69,69,70,71,71,71,72,73,73,73,73,73,73,73,74,75,75,75,77,78,80],[37,44,47,50,52,53,55,57,58,59,60,61,63,64,66,67,68,69,70,70,71,73,74,74,74,74,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,76,76,76,77,78,80]]]],
[["ClassGrp2","11y-14y"],[[[23,26,27,28,28,28,29,30,31,31,32,33,34,35,35,36,37,37,38,39,39,41,42,42,43,43,44,45,45,46,47,47,48,48,49,50,51,52,53,54,54,55,56,56,57,58,59,59,60,61,62,63,64,65,66,67,68,69,69,70,73],[28,32,35,37,39,40,41,42,43,44,46,47,48,49,50,51,52,53,53,54,56,57,57,58,59,59,60,60,61,62,62,64,64,65,66,66,67,68,68,69,69,70,70,71,71,72,72,72,72,72,73,73,74,74,74,75,76,76,77,78,81],[31,36,39,41,43,44,46,47,48,49,50,51,52,53,54,55,55,56,57,57,58,59,60,61,61,62,62,63,63,64,65,65,65,66,66,67,67,67,68,69,69,69,69,70,70,71,71,71,72,73,73,75,78,78,78,78,78,78,78,78,81],[30,35,37,39,40,42,44,45,46,48,49,50,51,52,53,54,54,55,56,57,58,58,59,59,60,60,61,62,62,63,63,64,64,65,65,65,65,66,67,68,68,69,69,70,70,70,71,72,72,72,72,73,75,76,76,76,76,76,77,78,81],[31,36,40,42,44,46,48,49,51,52,54,56,57,58,59,60,61,62,63,64,65,65,66,66,66,67,67,68,68,69,69,69,70,70,71,71,71,72,73,73,73,74,75,75,75,75,75,75,75,75,75,75,76,76,76,76,76,76,76,76,78]],[[23,25,25,25,25,26,26,28,29,29,30,31,32,33,34,35,36,36,37,38,40,40,41,42,43,44,45,46,47,47,48,49,49,50,51,51,52,53,54,54,55,56,56,57,58,59,60,60,61,62,63,64,65,67,70,72,74,76,77,78,81],[25,30,33,35,37,38,39,40,42,43,44,45,46,48,49,50,51,52,53,54,55,56,57,58,59,59,60,61,62,62,63,64,64,65,66,66,67,68,69,70,71,71,71,72,73,73,74,76,78,78,78,78,78,81,81,81,81,81,81,81,81],[29,34,37,39,40,41,43,44,45,46,47,49,50,51,52,53,53,54,55,56,57,58,58,59,59,60,60,61,61,62,62,63,63,64,64,65,65,66,67,67,68,68,68,69,70,71,72,73,73,74,75,76,79,79,81,81,81,81,81,81,81],[27,32,35,37,39,41,43,44,46,47,47,49,50,51,52,53,54,54,55,56,57,58,59,60,60,61,61,62,63,63,64,64,64,65,65,66,68,68,68,68,69,70,71,71,71,71,72,72,73,73,75,76,76,76,76,76,76,76,77,81,81],[32,38,41,44,47,49,52,54,56,57,59,60,61,63,65,66,66,67,68,70,70,71,72,72,73,74,74,75,75,75,75,75,75,75,75,75,75,76,76,76,76,76,77,79,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81]]]],
[["ClassGrp3","14y-18y"],[[[20,23,23,23,23,23,23,24,26,27,27,28,29,30,30,30,31,33,34,36,37,38,39,40,41,42,43,44,45,46,47,48,48,49,49,50,51,52,53,54,55,56,57,58,58,59,60,61,62,62,63,64,64,65,65,66,66,68,70,71,74],[30,34,36,37,39,40,41,42,43,44,45,46,47,48,49,49,50,52,53,54,55,56,57,58,59,59,60,61,61,62,63,63,64,64,65,66,66,66,67,68,68,69,71,72,73,75,76,78,78,80,81,81,81,81,81,81,81,81,81,81,81],[32,36,38,40,41,42,44,45,46,47,47,48,49,50,51,51,52,53,54,55,56,57,58,58,59,60,60,61,62,63,63,64,65,65,66,66,66,67,68,69,69,69,70,71,73,75,75,75,75,75,76,78,78,78,78,78,80,81,81,81,81],[31,36,38,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,59,60,61,62,62,63,64,64,65,66,67,68,68,68,69,69,69,69,70,70,71,71,71,71,72,72,72,73,73,74,74,75,78,78,80,81,81,81,81],[33,37,39,42,43,45,46,48,50,51,53,54,56,57,58,60,61,63,64,65,66,67,68,69,69,70,71,72,73,73,74,75,75,75,75,78,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81]],[[19,20,20,20,20,22,23,23,23,23,23,23,25,28,29,29,30,32,32,34,35,36,38,39,40,41,42,43,44,45,46,47,47,48,50,51,51,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,70,71,72,73,74,76,78,81],[20,25,29,31,33,35,36,37,39,40,41,42,43,44,45,46,48,49,50,51,53,54,55,55,56,57,58,60,61,61,62,63,64,65,65,66,67,68,69,69,70,70,71,71,72,73,75,76,80,81,81,81,81,81,81,81,81,81,81,81,81],[26,30,33,34,35,36,38,39,41,42,43,45,46,47,48,49,51,52,53,54,55,56,57,58,59,60,61,62,62,63,63,64,65,66,66,67,68,69,69,70,71,71,71,73,74,76,78,78,81,81,81,81,81,81,81,81,81,81,81,81,81],[25,30,33,35,37,38,40,41,43,44,45,46,47,48,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,67,68,68,69,70,70,71,72,74,74,74,75,76,76,76,77,78,80,80,80,80,80,80,81,81,81,81,81,81,81],[29,34,38,41,43,45,47,49,51,53,54,56,58,59,60,61,63,64,66,66,67,68,69,69,70,72,73,73,74,75,76,76,76,77,77,78,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,81,81,81,81,81,81,81]]]]]



function TestBtn(){
	var RawInText = document.getElementsByName('RawIn');
	var Client1 = [3,3,3,3,3,3,3,2,2,3,3,3,2,3,2,2,3,3,3,0,3,0,0,0,
	2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,
	3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,
	3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,
	3,3,3,3,3];

	for(let i=0; i<100; i++) RawInText[i].value = Client1[i];
}


function RSBtn(){
	var RS_Sum = [0,0,0,0,0];
	var RawInText = document.getElementsByName('RawIn');
	var RS_inputText = document.getElementsByName('RS_input');

	for(let i=0; i<100; i++){
		if(i>=0 & i<20) RS_Sum[0] += Number(RawInText[i].value);
		if(i>=20 & i<40) RS_Sum[1] += Number(RawInText[i].value);
		if(i>=40 & i<60) RS_Sum[2] += Number(RawInText[i].value);
		if(i>=60 & i<80) RS_Sum[3] += Number(RawInText[i].value);
		if(i>=80 & i<100) RS_Sum[4] += Number(RawInText[i].value);
	}

	for(let i=0; i<5; i++) RS_inputText[i].value = RS_Sum[i];
}

function ReloadBtn(){
	document.location.reload();
}




function SubmitBtn(){
//	document.getElementById('testText').innerHTML = SubScale;

//get input
	var AllBasicInfo = document.getElementsByName("BasicInfo");
	var RS_inputText = document.getElementsByName("RS_input"); 
	var RS_showText = document.getElementsByName("RS_show");
	var TS_showText = document.getElementsByName("TS_show");
	var TS_explainText = document.getElementsByName("TS_explain");
	var BasicInfo = [];
	var RS_input = [];
	var TS = [];

	for(let i=0; i<5; i++) if(RS_inputText[i].value) RS_input.push(Number(RS_inputText[i].value));
	if(RS_input.length < 5) {
		alert("請先於上方點選總分試算或手動輸入(需5個分數都有)，接著再送出哦！");
		return;
	}

	for(let i=0; i<AllBasicInfo.length; i++) BasicInfo.push(Number(AllBasicInfo[i].value));
	
	if(BasicInfo[1] == 5){
		if(BasicInfo[2] == 0) {
			alert("若不知道年級，請務必填寫個案的年齡哦！");
			return;
		}else if(BasicInfo[2] < 7 | BasicInfo[2] > 18){
			alert("年齡應介於 7 - 18 歲哦！");
			return;
		}
	}

	if(BasicInfo[1] == 5){
		if(BasicInfo[2] <= 10) {BasicInfo[1] = 0;} else if(BasicInfo[2] <= 14) {BasicInfo[1] = 1} else {BasicInfo[1] = 2;}
	}

	var norm_show = [["男性, ", "女性, "],["小學一年級 - 小學四年級 (約 7 - 10 歲) 組","小學五年級 - 國中二年級 (約 11 - 14 歲) 組","國中三年級 - 高中三年級 (約 15 - 18 歲) 組"]];
	document.getElementById("norm_show").innerHTML = "比較之常模為: " + norm_show[0][BasicInfo[0]] + norm_show[1][BasicInfo[1]];

	// explain
	function Score_explain(score){
		if(score >= 70) return "重度";
		if(score >= 60 & score <= 69) return "中度";
		if(score >= 55 & score <= 59) return "輕度";
		if(score < 55) return "平均";
	}

	function Self_explain(score){
		if(score > 55) return "高於平均";
		if(score >= 45 & score <= 55) return "平均";
		if(score >= 40 & score <= 44) return "低於平均";
		if(score < 40) return "低下";
	}

	// transfer into T score

	for(let i=0; i<5; i++){
		RS_showText[i].innerHTML = RS_input[i];
		TS.push(BYI_Norm[BasicInfo[1]][1][BasicInfo[0]][i][RS_input[i]]);
		TS_showText[i].innerHTML = TS[i];
		if(i == 0){
			TS_explainText[i].innerHTML = Self_explain(TS[i]);
		}else{
			TS_explainText[i].innerHTML = Score_explain(TS[i]);
		}
	}





// Chart plot
	var TS_ChartElem = document.getElementById("TS_Chart");

	new Chart(TS_ChartElem,{
		data: {
			labels: ['BSCI-Y','BAI-Y','BDI-Y','BANI-Y','BDBI-Y'],
			datasets: [{
				type: 'line',
				label: 'Index',
				data: TS,
				borderColor: '#0066CC',
				backgroundColor: 'rgb(0, 102, 204)',
			},{
				type: 'line',
				label: 'mean',
				data: [50,50,50,50,50],
				borderColor: '#D0D0D0',
			}]
		},
		options: {
			responsive: true,
			maintainAspectRatio: false,
			scales: {
				y: {
					min: 30,
					max: 100,
				},
				x: {
					ticks: {
						autoSkip: false,
						maxRotation: 0,
						minRotation: 0
					}
				}
			}
		}
	})

}
